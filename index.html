<!DOCTYPE html>
<html>
<head>
	<title>合成模拟器</title>
  <script type="text/javascript">
		var count = 0;
		var index = 1;
		var probability = 0.01;
		function calculate() {
			var input = document.getElementById("input").value;

            var result = input - 600 * index;
			if (result < 0) {
                alert("血精剩余不足！"); return;
            }

			document.getElementById("result").innerHTML = result;

			if (Math.random() < probability) {
				count++;
				probability = 0.01;
			} else {
				probability += 0.06;
			}
			document.getElementById("probability").innerHTML = probability.toFixed(2);
			document.getElementById("count").innerHTML = count;
			index += 1;
		}

		function calculate10() {
			for (var i=0; i<10; i++){
				var input = document.getElementById("input").value;

				var result = input - 600 * index;
				if (result < 0) {
					alert("血精剩余不足！"); return;
				}

				document.getElementById("result").innerHTML = result;

				if (Math.random() < probability) {
					count++;
					probability = 0.01;
				} else {
					probability += 0.06;
				}
				document.getElementById("probability").innerHTML = probability.toFixed(2);
				document.getElementById("count").innerHTML = count;
				index += 1;
			}
		}

		function calculate100() {
			for (var i=0; i<100; i++){
				var input = document.getElementById("input").value;

				var result = input - 600 * index;
				if (result < 0) {
					alert("血精剩余不足！"); return;
				}

				document.getElementById("result").innerHTML = result;

				if (Math.random() < probability) {
					count++;
					probability = 0.01;
				} else {
					probability += 0.06;
				}
				document.getElementById("probability").innerHTML = probability.toFixed(2);
				document.getElementById("count").innerHTML = count;
				index += 1;
			}
		}
	</script>
  <meta charset="utf-8">
</head>
<body>
	<label for="input">输入血精数量：</label>
	<input type="number" id="input" name="input" value="100000"><br><br>
	<button onclick="calculate()">合成</button><br><br>
	<button onclick="calculate10()">10次合成</button><br><br>
	<button onclick="calculate100()">100次合成</button><br><br>
	<label for="result">剩余血精：</label>
	<span id="result"></span><br><br>
	<label for="probability">当前概率：</label>
	<span id="probability">0.01</span><br><br>
	<label for="count">sss个数：</label>
	<span id="count">0</span><br><br>
</body>
</html>
